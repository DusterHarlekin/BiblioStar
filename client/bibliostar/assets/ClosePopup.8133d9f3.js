import{a as c,c as Ne,aU as ct,j as dt,m as vt,b5 as ft,r as k,aK as mt,w as K,L as Pe,h as u,T as X,b as ht,g as Ae,b6 as yt,_ as T,aN as gt,b0 as bt,z as _t,b7 as xt,b8 as wt,a9 as Dt}from"./index.3de14beb.js";import{t as Ct,a as Ee,f as Mt,g as qt,j as xe,_ as kt}from"./date.ca83aab8.js";import{p as L}from"./format.054b8074.js";import{f as Ht,d as Yt,Q as St}from"./QMenu.ba121aec.js";function jt(){let a=Object.create(null);return{getCache:(v,f)=>a[v]===void 0?a[v]=typeof f=="function"?f():f:a[v],setCache(v,f){a[v]=f},hasCache(v){return Object.hasOwnProperty.call(a,v)},clearCache(v){v!==void 0?delete a[v]:a=Object.create(null)}}}const Ot=["gregorian","persian"],Be={mask:{type:String},locale:Object,calendar:{type:String,validator:a=>Ot.includes(a),default:"gregorian"},landscape:Boolean,color:String,textColor:String,square:Boolean,flat:Boolean,bordered:Boolean,readonly:Boolean,disable:Boolean},Vt=["update:modelValue"];function P(a){return a.year+"/"+L(a.month)+"/"+L(a.day)}function Tt(a,v){const f=c(()=>a.disable!==!0&&a.readonly!==!0),M=c(()=>f.value===!0?0:-1),h=c(()=>{const y=[];return a.color!==void 0&&y.push(`bg-${a.color}`),a.textColor!==void 0&&y.push(`text-${a.textColor}`),y.join(" ")});function N(){return a.locale!==void 0?{...v.lang.date,...a.locale}:v.lang.date}function _(y){const S=new Date,j=y===!0?null:0;if(a.calendar==="persian"){const Y=Ct(S);return{year:Y.jy,month:Y.jm,day:Y.jd}}return{year:S.getFullYear(),month:S.getMonth()+1,day:S.getDate(),hour:j,minute:j,second:j,millisecond:j}}return{editable:f,tabindex:M,headerClass:h,getLocale:N,getCurrentDate:_}}const F=20,Ft=["Calendar","Years","Months"],$e=a=>Ft.includes(a),we=a=>/^-?[\d]+\/[0-1]\d$/.test(a),z=" \u2014 ";function E(a){return a.year+"/"+L(a.month)}var $t=Ne({name:"QDate",props:{...Be,...ct,...dt,modelValue:{required:!0,validator:a=>typeof a=="string"||Array.isArray(a)===!0||Object(a)===a||a===null},multiple:Boolean,range:Boolean,title:String,subtitle:String,mask:{...Be.mask,default:"YYYY/MM/DD"},defaultYearMonth:{type:String,validator:we},yearsInMonthView:Boolean,events:[Array,Function],eventColor:[String,Function],emitImmediately:Boolean,options:[Array,Function],navigationMinYearMonth:{type:String,validator:we},navigationMaxYearMonth:{type:String,validator:we},noUnset:Boolean,firstDayOfWeek:[String,Number],todayBtn:Boolean,minimal:Boolean,defaultView:{type:String,default:"Calendar",validator:$e}},emits:[...Vt,"rangeStart","rangeEnd","navigation"],setup(a,{slots:v,emit:f}){const{proxy:M}=Ae(),{$q:h}=M,N=vt(a,h),{getCache:_}=jt(),{tabindex:y,headerClass:S,getLocale:j,getCurrentDate:Y}=Tt(a,h);let O;const re=ft(a),ue=yt(re),W=k(null),g=k(Se()),b=k(j()),Re=c(()=>Se()),pe=c(()=>j()),V=c(()=>Y()),i=k(je(g.value,b.value)),C=k(a.defaultView),De=c(()=>h.lang.rtl===!0?"right":"left"),Z=k(De.value),ie=k(De.value),se=i.value.year,ee=k(se-se%F-(se<0?F:0)),D=k(null),Qe=c(()=>{const e=a.landscape===!0?"landscape":"portrait";return`q-date q-date--${e} q-date--${e}-${a.minimal===!0?"minimal":"standard"}`+(N.value===!0?" q-date--dark q-dark":"")+(a.bordered===!0?" q-date--bordered":"")+(a.square===!0?" q-date--square no-border-radius":"")+(a.flat===!0?" q-date--flat no-shadow":"")+(a.disable===!0?" disabled":a.readonly===!0?" q-date--readonly":"")}),B=c(()=>a.color||"primary"),A=c(()=>a.textColor||"white"),te=c(()=>a.emitImmediately===!0&&a.multiple!==!0&&a.range!==!0),ce=c(()=>Array.isArray(a.modelValue)===!0?a.modelValue:a.modelValue!==null&&a.modelValue!==void 0?[a.modelValue]:[]),H=c(()=>ce.value.filter(e=>typeof e=="string").map(e=>he(e,g.value,b.value)).filter(e=>e.dateHash!==null&&e.day!==null&&e.month!==null&&e.year!==null)),R=c(()=>{const e=t=>he(t,g.value,b.value);return ce.value.filter(t=>mt(t)===!0&&t.from!==void 0&&t.to!==void 0).map(t=>({from:e(t.from),to:e(t.to)})).filter(t=>t.from.dateHash!==null&&t.to.dateHash!==null&&t.from.dateHash<t.to.dateHash)}),ae=c(()=>a.calendar!=="persian"?e=>new Date(e.year,e.month-1,e.day):e=>{const t=Ee(e.year,e.month,e.day);return new Date(t.gy,t.gm-1,t.gd)}),de=c(()=>a.calendar==="persian"?P:(e,t,n)=>Mt(new Date(e.year,e.month-1,e.day,e.hour,e.minute,e.second,e.millisecond),t===void 0?g.value:t,n===void 0?b.value:n,e.year,e.timezoneOffset)),J=c(()=>H.value.length+R.value.reduce((e,t)=>e+1+qt(ae.value(t.to),ae.value(t.from)),0)),Ce=c(()=>{if(a.title!==void 0&&a.title!==null&&a.title.length!==0)return a.title;if(D.value!==null){const n=D.value.init,l=ae.value(n);return b.value.daysShort[l.getDay()]+", "+b.value.monthsShort[n.month-1]+" "+n.day+z+"?"}if(J.value===0)return z;if(J.value>1)return`${J.value} ${b.value.pluralDay}`;const e=H.value[0],t=ae.value(e);return isNaN(t.valueOf())===!0?z:b.value.headerTitle!==void 0?b.value.headerTitle(t,e):b.value.daysShort[t.getDay()]+", "+b.value.monthsShort[e.month-1]+" "+e.day}),ze=c(()=>H.value.concat(R.value.map(t=>t.from)).sort((t,n)=>t.year-n.year||t.month-n.month)[0]),Ke=c(()=>H.value.concat(R.value.map(t=>t.to)).sort((t,n)=>n.year-t.year||n.month-t.month)[0]),Me=c(()=>{if(a.subtitle!==void 0&&a.subtitle!==null&&a.subtitle.length!==0)return a.subtitle;if(J.value===0)return z;if(J.value>1){const e=ze.value,t=Ke.value,n=b.value.monthsShort;return n[e.month-1]+(e.year!==t.year?" "+e.year+z+n[t.month-1]+" ":e.month!==t.month?z+n[t.month-1]:"")+" "+t.year}return H.value[0].year}),ne=c(()=>{const e=[h.iconSet.datetime.arrowLeft,h.iconSet.datetime.arrowRight];return h.lang.rtl===!0?e.reverse():e}),qe=c(()=>a.firstDayOfWeek!==void 0?Number(a.firstDayOfWeek):b.value.firstDayOfWeek),We=c(()=>{const e=b.value.daysShort,t=qe.value;return t>0?e.slice(t,7).concat(e.slice(0,t)):e}),I=c(()=>{const e=i.value;return a.calendar!=="persian"?new Date(e.year,e.month,0).getDate():xe(e.year,e.month)}),Je=c(()=>typeof a.eventColor=="function"?a.eventColor:()=>a.eventColor),x=c(()=>{if(a.navigationMinYearMonth===void 0)return null;const e=a.navigationMinYearMonth.split("/");return{year:parseInt(e[0],10),month:parseInt(e[1],10)}}),w=c(()=>{if(a.navigationMaxYearMonth===void 0)return null;const e=a.navigationMaxYearMonth.split("/");return{year:parseInt(e[0],10),month:parseInt(e[1],10)}}),ve=c(()=>{const e={month:{prev:!0,next:!0},year:{prev:!0,next:!0}};return x.value!==null&&x.value.year>=i.value.year&&(e.year.prev=!1,x.value.year===i.value.year&&x.value.month>=i.value.month&&(e.month.prev=!1)),w.value!==null&&w.value.year<=i.value.year&&(e.year.next=!1,w.value.year===i.value.year&&w.value.month<=i.value.month&&(e.month.next=!1)),e}),le=c(()=>{const e={};return H.value.forEach(t=>{const n=E(t);e[n]===void 0&&(e[n]=[]),e[n].push(t.day)}),e}),ke=c(()=>{const e={};return R.value.forEach(t=>{const n=E(t.from),l=E(t.to);if(e[n]===void 0&&(e[n]=[]),e[n].push({from:t.from.day,to:n===l?t.to.day:void 0,range:t}),n<l){let o;const{year:d,month:r}=t.from,s=r<12?{year:d,month:r+1}:{year:d+1,month:1};for(;(o=E(s))<=l;)e[o]===void 0&&(e[o]=[]),e[o].push({from:void 0,to:o===l?t.to.day:void 0,range:t}),s.month++,s.month>12&&(s.year++,s.month=1)}}),e}),U=c(()=>{if(D.value===null)return;const{init:e,initHash:t,final:n,finalHash:l}=D.value,[o,d]=t<=l?[e,n]:[n,e],r=E(o),s=E(d);if(r!==q.value&&s!==q.value)return;const m={};return r===q.value?(m.from=o.day,m.includeFrom=!0):m.from=1,s===q.value?(m.to=d.day,m.includeTo=!0):m.to=I.value,m}),q=c(()=>E(i.value)),Ue=c(()=>{const e={};if(a.options===void 0){for(let n=1;n<=I.value;n++)e[n]=!0;return e}const t=typeof a.options=="function"?a.options:n=>a.options.includes(n);for(let n=1;n<=I.value;n++){const l=q.value+"/"+L(n);e[n]=t(l)}return e}),Ge=c(()=>{const e={};if(a.events===void 0)for(let t=1;t<=I.value;t++)e[t]=!1;else{const t=typeof a.events=="function"?a.events:n=>a.events.includes(n);for(let n=1;n<=I.value;n++){const l=q.value+"/"+L(n);e[n]=t(l)===!0&&Je.value(l)}}return e}),Xe=c(()=>{let e,t;const{year:n,month:l}=i.value;if(a.calendar!=="persian")e=new Date(n,l-1,1),t=new Date(n,l-1,0).getDate();else{const o=Ee(n,l,1);e=new Date(o.gy,o.gm-1,o.gd);let d=l-1,r=n;d===0&&(d=12,r--),t=xe(r,d)}return{days:e.getDay()-qe.value-1,endDay:t}}),He=c(()=>{const e=[],{days:t,endDay:n}=Xe.value,l=t<0?t+7:t;if(l<6)for(let r=n-l;r<=n;r++)e.push({i:r,fill:!0});const o=e.length;for(let r=1;r<=I.value;r++){const s={i:r,event:Ge.value[r],classes:[]};Ue.value[r]===!0&&(s.in=!0,s.flat=!0),e.push(s)}if(le.value[q.value]!==void 0&&le.value[q.value].forEach(r=>{const s=o+r-1;Object.assign(e[s],{selected:!0,unelevated:!0,flat:!1,color:B.value,textColor:A.value})}),ke.value[q.value]!==void 0&&ke.value[q.value].forEach(r=>{if(r.from!==void 0){const s=o+r.from-1,m=o+(r.to||I.value)-1;for(let G=s;G<=m;G++)Object.assign(e[G],{range:r.range,unelevated:!0,color:B.value,textColor:A.value});Object.assign(e[s],{rangeFrom:!0,flat:!1}),r.to!==void 0&&Object.assign(e[m],{rangeTo:!0,flat:!1})}else if(r.to!==void 0){const s=o+r.to-1;for(let m=o;m<=s;m++)Object.assign(e[m],{range:r.range,unelevated:!0,color:B.value,textColor:A.value});Object.assign(e[s],{flat:!1,rangeTo:!0})}else{const s=o+I.value-1;for(let m=o;m<=s;m++)Object.assign(e[m],{range:r.range,unelevated:!0,color:B.value,textColor:A.value})}}),U.value!==void 0){const r=o+U.value.from-1,s=o+U.value.to-1;for(let m=r;m<=s;m++)e[m].color=B.value,e[m].editRange=!0;U.value.includeFrom===!0&&(e[r].editRangeFrom=!0),U.value.includeTo===!0&&(e[s].editRangeTo=!0)}i.value.year===V.value.year&&i.value.month===V.value.month&&(e[o+V.value.day-1].today=!0);const d=e.length%7;if(d>0){const r=7-d;for(let s=1;s<=r;s++)e.push({i:s,fill:!0})}return e.forEach(r=>{let s="q-date__calendar-item ";r.fill===!0?s+="q-date__calendar-item--fill":(s+=`q-date__calendar-item--${r.in===!0?"in":"out"}`,r.range!==void 0&&(s+=` q-date__range${r.rangeTo===!0?"-to":r.rangeFrom===!0?"-from":""}`),r.editRange===!0&&(s+=` q-date__edit-range${r.editRangeFrom===!0?"-from":""}${r.editRangeTo===!0?"-to":""}`),(r.range!==void 0||r.editRange===!0)&&(s+=` text-${r.color}`)),r.classes=s}),e}),Ze=c(()=>a.disable===!0?{"aria-disabled":"true"}:{});K(()=>a.modelValue,e=>{if(O===JSON.stringify(e))O=0;else{const t=je(g.value,b.value);p(t.year,t.month,t)}}),K(C,()=>{W.value!==null&&M.$el.contains(document.activeElement)===!0&&W.value.focus()}),K(()=>i.value.year+"|"+i.value.month,()=>{f("navigation",{year:i.value.year,month:i.value.month})}),K(Re,e=>{Ie(e,b.value,"mask"),g.value=e}),K(pe,e=>{Ie(g.value,e,"locale"),b.value=e});function fe(e){O=JSON.stringify(e)}function Ye(){const{year:e,month:t,day:n}=V.value,l={...i.value,year:e,month:t,day:n},o=le.value[E(l)];(o===void 0||o.includes(l.day)===!1)&&ge(l),me(l.year,l.month)}function et(e){$e(e)===!0&&(C.value=e)}function tt(e,t){["month","year"].includes(e)&&(e==="month"?Ve:ye)(t===!0?-1:1)}function me(e,t){C.value="Calendar",p(e,t)}function at(e,t){if(a.range===!1||!e){D.value=null;return}const n=Object.assign({...i.value},e),l=t!==void 0?Object.assign({...i.value},t):n;D.value={init:n,initHash:P(n),final:l,finalHash:P(l)},me(n.year,n.month)}function Se(){return a.calendar==="persian"?"YYYY/MM/DD":a.mask}function he(e,t,n){return kt(e,t,n,a.calendar,{hour:0,minute:0,second:0,millisecond:0})}function je(e,t){const n=Array.isArray(a.modelValue)===!0?a.modelValue:a.modelValue?[a.modelValue]:[];if(n.length===0)return Oe();const l=n[n.length-1],o=he(l.from!==void 0?l.from:l,e,t);return o.dateHash===null?Oe():o}function Oe(){let e,t;if(a.defaultYearMonth!==void 0){const n=a.defaultYearMonth.split("/");e=parseInt(n[0],10),t=parseInt(n[1],10)}else{const n=V.value!==void 0?V.value:Y();e=n.year,t=n.month}return{year:e,month:t,day:1,hour:0,minute:0,second:0,millisecond:0,dateHash:e+"/"+L(t)+"/01"}}function Ve(e){let t=i.value.year,n=Number(i.value.month)+e;n===13?(n=1,t++):n===0&&(n=12,t--),p(t,n),te.value===!0&&oe("month")}function ye(e){const t=Number(i.value.year)+e;p(t,i.value.month),te.value===!0&&oe("year")}function nt(e){p(e,i.value.month),C.value=a.defaultView==="Years"?"Months":"Calendar",te.value===!0&&oe("year")}function lt(e){p(i.value.year,e),C.value="Calendar",te.value===!0&&oe("month")}function ot(e,t){const n=le.value[t];((n==null?void 0:n.includes(e.day))===!0?be:ge)(e)}function $(e){return{year:e.year,month:e.month,day:e.day}}function p(e,t,n){if(x.value!==null&&e<=x.value.year&&((t<x.value.month||e<x.value.year)&&(t=x.value.month),e=x.value.year),w.value!==null&&e>=w.value.year&&((t>w.value.month||e>w.value.year)&&(t=w.value.month),e=w.value.year),n!==void 0){const{hour:o,minute:d,second:r,millisecond:s,timezoneOffset:m,timeHash:G}=n;Object.assign(i.value,{hour:o,minute:d,second:r,millisecond:s,timezoneOffset:m,timeHash:G})}const l=e+"/"+L(t)+"/01";l!==i.value.dateHash&&(Z.value=i.value.dateHash<l==(h.lang.rtl!==!0)?"left":"right",e!==i.value.year&&(ie.value=Z.value),Pe(()=>{ee.value=e-e%F-(e<0?F:0),Object.assign(i.value,{year:e,month:t,day:1,dateHash:l})}))}function Te(e,t,n){const l=e!==null&&e.length===1&&a.multiple===!1?e[0]:e,{reason:o,details:d}=Fe(t,n);fe(l),f("update:modelValue",l,o,d)}function oe(e){const t=H.value[0]!==void 0&&H.value[0].dateHash!==null?{...H.value[0]}:{...i.value};Pe(()=>{t.year=i.value.year,t.month=i.value.month;const n=a.calendar!=="persian"?new Date(t.year,t.month,0).getDate():xe(t.year,t.month);t.day=Math.min(Math.max(1,t.day),n);const l=Q(t),{details:o}=Fe("",t);fe(l),f("update:modelValue",l,e,o)})}function Fe(e,t){return t.from!==void 0?{reason:`${e}-range`,details:{...$(t.target),from:$(t.from),to:$(t.to)}}:{reason:`${e}-day`,details:$(t)}}function Q(e,t,n){return e.from!==void 0?{from:de.value(e.from,t,n),to:de.value(e.to,t,n)}:de.value(e,t,n)}function ge(e){let t;if(a.multiple===!0)if(e.from!==void 0){const n=P(e.from),l=P(e.to),o=H.value.filter(r=>r.dateHash<n||r.dateHash>l),d=R.value.filter(({from:r,to:s})=>s.dateHash<n||r.dateHash>l);t=o.concat(d).concat(e).map(r=>Q(r))}else{const n=ce.value.slice();n.push(Q(e)),t=n}else t=Q(e);Te(t,"add",e)}function be(e){if(a.noUnset===!0)return;let t=null;if(a.multiple===!0&&Array.isArray(a.modelValue)===!0){const n=Q(e);e.from!==void 0?t=a.modelValue.filter(l=>l.from!==void 0?l.from!==n.from&&l.to!==n.to:!0):t=a.modelValue.filter(l=>l!==n),t.length===0&&(t=null)}Te(t,"remove",e)}function Ie(e,t,n){const l=H.value.concat(R.value).map(d=>Q(d,e,t)).filter(d=>d.from!==void 0?d.from.dateHash!==null&&d.to.dateHash!==null:d.dateHash!==null),o=(a.multiple===!0?l:l[0])||null;fe(o),f("update:modelValue",o,n)}function rt(){if(a.minimal!==!0)return u("div",{class:"q-date__header "+S.value},[u("div",{class:"relative-position"},[u(X,{name:"q-transition--fade"},()=>u("div",{key:"h-yr-"+Me.value,class:"q-date__header-subtitle q-date__header-link "+(C.value==="Years"?"q-date__header-link--active":"cursor-pointer"),tabindex:y.value,..._("vY",{onClick(){C.value="Years"},onKeyup(e){e.keyCode===13&&(C.value="Years")}})},[Me.value]))]),u("div",{class:"q-date__header-title relative-position flex no-wrap"},[u("div",{class:"relative-position col"},[u(X,{name:"q-transition--fade"},()=>u("div",{key:"h-sub"+Ce.value,class:"q-date__header-title-label q-date__header-link "+(C.value==="Calendar"?"q-date__header-link--active":"cursor-pointer"),tabindex:y.value,..._("vC",{onClick(){C.value="Calendar"},onKeyup(e){e.keyCode===13&&(C.value="Calendar")}})},[Ce.value]))]),a.todayBtn===!0?u(T,{class:"q-date__header-today self-start",icon:h.iconSet.datetime.today,ariaLabel:h.lang.date.today,flat:!0,size:"sm",round:!0,tabindex:y.value,onClick:Ye}):null])])}function _e({label:e,type:t,key:n,dir:l,goTo:o,boundaries:d,cls:r}){return[u("div",{class:"row items-center q-date__arrow"},[u(T,{round:!0,dense:!0,size:"sm",flat:!0,icon:ne.value[0],ariaLabel:t==="Years"?h.lang.date.prevYear:h.lang.date.prevMonth,tabindex:y.value,disable:d.prev===!1,..._("go-#"+t,{onClick(){o(-1)}})})]),u("div",{class:"relative-position overflow-hidden flex flex-center"+r},[u(X,{name:"q-transition--jump-"+l},()=>u("div",{key:n},[u(T,{flat:!0,dense:!0,noCaps:!0,label:e,tabindex:y.value,..._("view#"+t,{onClick:()=>{C.value=t}})})]))]),u("div",{class:"row items-center q-date__arrow"},[u(T,{round:!0,dense:!0,size:"sm",flat:!0,icon:ne.value[1],ariaLabel:t==="Years"?h.lang.date.nextYear:h.lang.date.nextMonth,tabindex:y.value,disable:d.next===!1,..._("go+#"+t,{onClick(){o(1)}})})])]}const ut={Calendar:()=>[u("div",{key:"calendar-view",class:"q-date__view q-date__calendar"},[u("div",{class:"q-date__navigation row items-center no-wrap"},_e({label:b.value.months[i.value.month-1],type:"Months",key:i.value.month,dir:Z.value,goTo:Ve,boundaries:ve.value.month,cls:" col"}).concat(_e({label:i.value.year,type:"Years",key:i.value.year,dir:ie.value,goTo:ye,boundaries:ve.value.year,cls:""}))),u("div",{class:"q-date__calendar-weekdays row items-center no-wrap"},We.value.map(e=>u("div",{class:"q-date__calendar-item"},[u("div",e)]))),u("div",{class:"q-date__calendar-days-container relative-position overflow-hidden"},[u(X,{name:"q-transition--slide-"+Z.value},()=>u("div",{key:q.value,class:"q-date__calendar-days fit"},He.value.map(e=>u("div",{class:e.classes},[e.in===!0?u(T,{class:e.today===!0?"q-date__today":"",dense:!0,flat:e.flat,unelevated:e.unelevated,color:e.color,textColor:e.textColor,label:e.i,tabindex:y.value,..._("day#"+e.i,{onClick:()=>{it(e.i)},onMouseover:()=>{st(e.i)}})},e.event!==!1?()=>u("div",{class:"q-date__event bg-"+e.event}):null):u("div",""+e.i)]))))])])],Months(){const e=i.value.year===V.value.year,t=l=>x.value!==null&&i.value.year===x.value.year&&x.value.month>l||w.value!==null&&i.value.year===w.value.year&&w.value.month<l,n=b.value.monthsShort.map((l,o)=>{const d=i.value.month===o+1;return u("div",{class:"q-date__months-item flex flex-center"},[u(T,{class:e===!0&&V.value.month===o+1?"q-date__today":null,flat:d!==!0,label:l,unelevated:d,color:d===!0?B.value:null,textColor:d===!0?A.value:null,tabindex:y.value,disable:t(o+1),..._("month#"+o,{onClick:()=>{lt(o+1)}})})])});return a.yearsInMonthView===!0&&n.unshift(u("div",{class:"row no-wrap full-width"},[_e({label:i.value.year,type:"Years",key:i.value.year,dir:ie.value,goTo:ye,boundaries:ve.value.year,cls:" col"})])),u("div",{key:"months-view",class:"q-date__view q-date__months flex flex-center"},n)},Years(){const e=ee.value,t=e+F,n=[],l=o=>x.value!==null&&x.value.year>o||w.value!==null&&w.value.year<o;for(let o=e;o<=t;o++){const d=i.value.year===o;n.push(u("div",{class:"q-date__years-item flex flex-center"},[u(T,{key:"yr"+o,class:V.value.year===o?"q-date__today":null,flat:!d,label:o,dense:!0,unelevated:d,color:d===!0?B.value:null,textColor:d===!0?A.value:null,tabindex:y.value,disable:l(o),..._("yr#"+o,{onClick:()=>{nt(o)}})})]))}return u("div",{class:"q-date__view q-date__years flex flex-center"},[u("div",{class:"col-auto"},[u(T,{round:!0,dense:!0,flat:!0,icon:ne.value[0],ariaLabel:h.lang.date.prevRangeYears(F),tabindex:y.value,disable:l(e),..._("y-",{onClick:()=>{ee.value-=F}})})]),u("div",{class:"q-date__years-content col self-stretch row items-center"},n),u("div",{class:"col-auto"},[u(T,{round:!0,dense:!0,flat:!0,icon:ne.value[1],ariaLabel:h.lang.date.nextRangeYears(F),tabindex:y.value,disable:l(t),..._("y+",{onClick:()=>{ee.value+=F}})})])])}};function it(e){const t={...i.value,day:e};if(a.range===!1){ot(t,q.value);return}if(D.value===null){const n=He.value.find(o=>o.fill!==!0&&o.i===e);if(a.noUnset!==!0&&n.range!==void 0){be({target:t,from:n.range.from,to:n.range.to});return}if(n.selected===!0){be(t);return}const l=P(t);D.value={init:t,initHash:l,final:t,finalHash:l},f("rangeStart",$(t))}else{const n=D.value.initHash,l=P(t),o=n<=l?{from:D.value.init,to:t}:{from:t,to:D.value.init};D.value=null,ge(n===l?t:{target:t,...o}),f("rangeEnd",{from:$(o.from),to:$(o.to)})}}function st(e){if(D.value!==null){const t={...i.value,day:e};Object.assign(D.value,{final:t,finalHash:P(t)})}}return Object.assign(M,{setToday:Ye,setView:et,offsetCalendar:tt,setCalendarTo:me,setEditingRange:at}),()=>{const e=[u("div",{class:"q-date__content col relative-position"},[u(X,{name:"q-transition--fade"},ut[C.value])])],t=ht(v.default);return t!==void 0&&e.push(u("div",{class:"q-date__actions"},t)),a.name!==void 0&&a.disable!==!0&&ue(e,"push"),u("div",{class:Qe.value,...Ze.value},[rt(),u("div",{ref:W,class:"q-date__main col column",tabindex:-1},e)])}}}),Lt=Ne({name:"QPopupProxy",props:{...Ht,breakpoint:{type:[String,Number],default:450}},emits:["show","hide"],setup(a,{slots:v,emit:f,attrs:M}){const{proxy:h}=Ae(),{$q:N}=h,_=k(!1),y=k(null),S=c(()=>parseInt(a.breakpoint,10)),{canShow:j}=Yt({showing:_});function Y(){return N.screen.width<S.value||N.screen.height<S.value?"dialog":"menu"}const O=k(Y()),re=c(()=>O.value==="menu"?{maxHeight:"99vh"}:{});K(()=>Y(),g=>{_.value!==!0&&(O.value=g)});function ue(g){_.value=!0,f("show",g)}function W(g){_.value=!1,O.value=Y(),f("hide",g)}return Object.assign(h,{show(g){j(g)===!0&&y.value.show(g)},hide(g){y.value.hide(g)},toggle(g){y.value.toggle(g)}}),gt(h,"currentComponent",()=>({type:O.value,ref:y.value})),()=>{const g={ref:y,...re.value,...M,onShow:ue,onHide:W};let b;return O.value==="dialog"?b=bt:(b=St,Object.assign(g,{target:a.target,contextMenu:a.contextMenu,noParentEvent:!0,separateClosePopup:!0})),u(b,g,v.default)}}});function Le(a){if(a===!1)return 0;if(a===!0||a===void 0)return 1;const v=parseInt(a,10);return isNaN(v)?0:v}var Nt=_t({name:"close-popup",beforeMount(a,{value:v}){const f={depth:Le(v),handler(M){f.depth!==0&&setTimeout(()=>{const h=xt(a);h!==void 0&&wt(h,M,f.depth)})},handlerKey(M){Dt(M,13)===!0&&f.handler(M)}};a.__qclosepopup=f,a.addEventListener("click",f.handler),a.addEventListener("keyup",f.handlerKey)},updated(a,{value:v,oldValue:f}){v!==f&&(a.__qclosepopup.depth=Le(v))},beforeUnmount(a){const v=a.__qclosepopup;a.removeEventListener("click",v.handler),a.removeEventListener("keyup",v.handlerKey),delete a.__qclosepopup}});export{Nt as C,Lt as Q,$t as a};
