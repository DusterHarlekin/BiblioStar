import{r as n,R as Q,V as $,W as z,X as o,$ as t,Z as e,x as d,az as r,a3 as u,aA as p,_ as S,a2 as k,Y as T}from"./index.3de14beb.js";import{Q as j}from"./QTooltip.2c191821.js";import{Q as C}from"./QTd.4e40a178.js";import{Q as I}from"./QTable.bd81f58f.js";import{Q as L}from"./QPage.ea495e0d.js";import"./QMenu.ba121aec.js";import"./QList.d82f2d18.js";import"./QSelect.dcde8888.js";import"./QItem.5c0ffacc.js";import"./format.054b8074.js";const N={class:"row justify-between items-center q-gutter-x-xl q-gutter-y-md q-mb-md q-pt-sm"},V={class:"col"},B={class:"row q-gutter-sm items-center q-mb-sm"},R={class:"row q-mb-lg justify-center content-end items-center q-col-gutter-xl text-white"},A={class:"col-lg-4 col-md-6 col-xs-12"},D={class:"text-weight-light font-title",style:{"font-size":"5.5rem"}},F={class:"col-lg-4 col-md-6 col-xs-12"},E={class:"text-weight-light font-title",style:{"font-size":"5.5rem"}},G={class:"col-lg-4 col-md-6 col-xs-12"},O={class:"text-weight-light font-title",style:{"font-size":"5.5rem"}},U={class:"row justify-center content-end items-center q-col-gutter-lg"},W={class:"col"},X={class:"row q-gutter-sm items-center q-mb-sm"},it={__name:"IndexPage",setup(Y){const c=n({page:1,rowsPerPage:10,rowsNumber:0}),f=Q(),_=n(0),h=n(0),v=n(0),b=n([]),m=n(!1),x=[{name:"cedula",label:"C\xE9dula del lector",field:"cedula",align:"left"},{name:"cod_isbn",label:"Libro",field:l=>`${l.cod_isbn} - ${l.titulo}`,align:"left"},{name:"fecha_s",label:"Fecha de salida",field:l=>`${l.fecha_s} ${l.hora_s}`,align:"left"},{name:"fecha_e",label:"Fecha de entrega",field:l=>`${l.fecha_e} ${l.hora_e}`,align:"left"},{name:"actions",label:"Acciones",align:"left"}],w=async(l=1)=>{var s,i,y;try{const g={method:"GET",headers:{"Content-Type":"application/json"}};let P=`http://localhost/bibliostar/API/dashboard.php?page=${l}&session_user_name=${localStorage.getItem("usuario")}&session_user_role=${localStorage.getItem("rol")}`;m.value=!0;const a=await(await fetch(P,g)).json();b.value=a.data?a.data:[],_.value=a.cantPrestamos?a.cantPrestamos:0,h.value=a.cantSalas?a.cantSalas:0,v.value=a.cantLibros?a.cantLibros:0,c.value.rowsNumber=(s=a.pagination)!=null&&s.total?a.pagination.total:0,c.value.page=(i=a.pagination)!=null&&i.currentPage?a.pagination.currentPage:1,c.value.rowsPerPage=(y=a.pagination)!=null&&y.perPage?a.pagination.perPage:10}catch(g){f.notify({color:"negative",position:"top",message:g.message,icon:"mdi-alert"})}finally{m.value=!1}},q=l=>{w(l.pagination.page)};return w(),(l,s)=>($(),z(L,{class:"q-py-md q-px-lg"},{default:o(()=>[t("div",N,[t("div",V,[t("div",B,[e(d,{name:"mdi-file-document-minus",size:"lg",color:"primary"}),s[1]||(s[1]=t("div",{class:"text-h4 text-weight-medium font-title"},"Resumen",-1))])])]),t("div",R,[t("div",A,[e(p,{class:"q-py-lg bg-primary"},{default:o(()=>[e(r,{class:"row items-center"},{default:o(()=>[e(d,{name:"mdi-account-clock",class:"q-mr-md text-h3"}),s[2]||(s[2]=t("div",{class:"text-weight-light font-title",style:{"font-size":"2.5rem"}}," Pr\xE9stamos ",-1))]),_:1}),e(r,{class:"row"},{default:o(()=>[t("div",D,u(_.value),1)]),_:1})]),_:1})]),t("div",F,[e(p,{class:"q-py-lg bg-secondary"},{default:o(()=>[e(r,{class:"row items-center"},{default:o(()=>[e(d,{name:"mdi-book",class:"q-mr-md text-h3"}),s[3]||(s[3]=t("div",{class:"text-weight-light font-title",style:{"font-size":"2.5rem"}}," Libros ",-1))]),_:1}),e(r,{class:"row"},{default:o(()=>[t("div",E,u(v.value),1)]),_:1})]),_:1})]),t("div",G,[e(p,{class:"q-py-lg bg-primary"},{default:o(()=>[e(r,{class:"row items-center"},{default:o(()=>[e(d,{name:"mdi-home-search",class:"q-mr-md text-h3"}),s[4]||(s[4]=t("div",{class:"text-weight-light font-title",style:{"font-size":"2.5rem"}}," Salas ",-1))]),_:1}),e(r,{class:"row"},{default:o(()=>[t("div",O,u(h.value),1)]),_:1})]),_:1})])]),t("div",U,[t("div",W,[t("div",X,[e(d,{name:"mdi-account-clock",size:"lg",color:"primary"}),s[5]||(s[5]=t("div",{class:"text-h4 text-weight-medium font-title"}," Pr\xE9stamos activos ",-1))]),e(I,{flat:"",dense:T(f).screen.lt.lg,bordered:"",pagination:c.value,"onUpdate:pagination":s[0]||(s[0]=i=>c.value=i),rows:b.value,columns:x,loading:m.value,"row-key":"cod_isbn","rows-per-page-options":[],onRequest:q},{"body-cell-actions":o(i=>[e(C,{props:i},{default:o(()=>[e(S,{flat:"",round:"",icon:"mdi-eye",color:"positive",to:`/prestamos/prestamo/${i.row.cod_isbn}`},{default:o(()=>[e(j,null,{default:o(()=>s[6]||(s[6]=[k("Ver")])),_:1})]),_:2},1032,["to"])]),_:2},1032,["props"])]),_:1},8,["dense","pagination","rows","loading"])])])]),_:1}))}};export{it as default};
