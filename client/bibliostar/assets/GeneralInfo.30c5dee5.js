import{r as c,R as v,V as f,W as g,X as n,$ as r,Z as t,x as w,aA as _,az as y,bc as h,b2 as m,_ as x,a0 as I}from"./index.3de14beb.js";import{Q as V}from"./QForm.56ccee4c.js";import{Q as q}from"./QPage.ea495e0d.js";const Q={class:"row justify-between items-center q-gutter-x-xl q-gutter-y-md q-mb-md q-pt-sm"},j={class:"col"},z={class:"row q-gutter-sm items-center q-mb-sm"},C={class:"row q-mb-lg justify-center content-end items-center q-col-gutter-xl text-white"},N={__name:"GeneralInfo",setup(S){const a=c({nombre_organizacion:"",RIF:"",direccion:""}),l=c(!1);c(!1);const u=v(),d=c(!1),b=async()=>{try{a.value.session_user_name=localStorage.getItem("usuario"),a.value.session_user_role=localStorage.getItem("rol");const s={method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify(a.value)},e=await fetch("http://localhost/bibliostar/API/config.php",s);if(!e.ok)throw new Error(e.statusText);const o=await e.json();if(o.error)throw new Error(o.error);u.notify({color:"positive",position:"top",message:o.success,icon:"mdi-checkbox-marked-circle"}),await p(),l.value=!1}catch(s){u.notify({color:"negative",position:"top",message:s.message,icon:"mdi-alert"})}},p=async(s=1)=>{try{const e={method:"GET",headers:{"Content-Type":"application/json"}};let o=`http://localhost/bibliostar/API/config.php?page=${s}&session_user_name=${localStorage.getItem("usuario")}&session_user_role=${localStorage.getItem("rol")}`;d.value=!0;const i=await(await fetch(o,e)).json();if(i.error)throw new Error(i.error);a.value=i[0]?i[0]:{}}catch(e){u.notify({color:"negative",position:"top",message:e.message,icon:"mdi-alert"})}finally{d.value=!1}};return p(),(s,e)=>(f(),g(q,{class:"q-py-md q-px-lg"},{default:n(()=>[r("div",Q,[r("div",j,[r("div",z,[t(w,{name:"mdi-file-eye",size:"lg",color:"primary"}),e[4]||(e[4]=r("div",{class:"text-h4 text-weight-medium font-title"}," Informaci\xF3n general ",-1))])])]),r("div",C,[t(V,{onSubmit:b,class:"q-gutter-md col"},{default:n(()=>[t(_,{class:"my-card"},{default:n(()=>[t(y,{class:"bg-primary row items-center justify-between text-white"},{default:n(()=>[e[5]||(e[5]=r("div",{class:"text-h6"},"Informaci\xF3n de la biblioteca",-1)),t(h,{modelValue:l.value,"onUpdate:modelValue":e[0]||(e[0]=o=>l.value=o),"left-label":"",label:"Editar informaci\xF3n",color:"secondary"},null,8,["modelValue"])]),_:1}),t(y,null,{default:n(()=>[t(m,{modelValue:a.value.nombre_organizacion,"onUpdate:modelValue":e[1]||(e[1]=o=>a.value.nombre_organizacion=o),label:"Nombre de la organizaci\xF3n",readonly:!l.value},null,8,["modelValue","readonly"]),t(m,{modelValue:a.value.RIF,"onUpdate:modelValue":e[2]||(e[2]=o=>a.value.RIF=o),label:"RIF",readonly:!l.value},null,8,["modelValue","readonly"]),t(m,{modelValue:a.value.direccion,"onUpdate:modelValue":e[3]||(e[3]=o=>a.value.direccion=o),label:"Direcci\xF3n",type:"textarea",readonly:!l.value},null,8,["modelValue","readonly"]),l.value?(f(),g(x,{key:0,type:"submit",color:"primary",class:"q-mt-md full-width",size:"md",loading:d.value,label:"Guardar cambios"},null,8,["loading"])):I("",!0)]),_:1})]),_:1})]),_:1})])]),_:1}))}};export{N as default};
